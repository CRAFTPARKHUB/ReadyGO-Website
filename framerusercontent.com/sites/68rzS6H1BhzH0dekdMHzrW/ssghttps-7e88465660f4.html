// Vertical Number Counter with slot-machine effect, configurable start/end, duration, easing, and trigger import{jsx as _jsx}from"react/jsx-runtime";import{useEffect,useRef,useState,startTransition}from"react";import{addPropertyControls,ControlType,useInView,useIsStaticRenderer}from"framer";/**
* Vertical Number Counter * * @framerSupportedLayoutWidth any-prefer-fixed * @framerSupportedLayoutHeight any-prefer-fixed */export default function NumberCounter(props){const{startNumber,endNumber,duration,trigger,font,color,style}=props;const[started,setStarted]=useState(false);const[current,setCurrent]=useState(startNumber);const[hasPlayed,setHasPlayed]=useState(false);const
containerRef=useRef(null);const isStatic=useIsStaticRenderer();const inView=useInView(containerRef,{once:true,margin:"-10% 0px"});// Determine trigger useEffect(()=>{if(isStatic||hasPlayed)return;if(trigger==="layer"&&inView)startTransition(()=>setStarted(true));},[trigger,inView,isStatic,hasPlayed]);//
Animate numbers useEffect(()=>{if(!started||hasPlayed)return;if(startNumber===endNumber){setCurrent(endNumber);setHasPlayed(true);return;}let raf;const totalFrames=Math.round(duration*60||60);let frame=0;function animate(){frame++;const progress=Math.min(frame/totalFrames,1);const
eased=progress// Linear for now, CSS handles visual easing ;const value=Math.round(startNumber+(endNumber-startNumber)*eased);setCurrent(value);if(progress
<1){raf=requestAnimationFrame(animate);}else{setCurrent(endNumber);setHasPlayed(true);}}raf=requestAnimationFrame(animate);return()=>raf&&cancelAnimationFrame(raf);},[started,startNumber,endNumber,duration,hasPlayed]);// Generate digit arrays // Handle decimals for display const decimals=Math.max(0,Math.min(6,Number(props.decimals)||0));// For slot effect, only support decimals=0 const
    startStr=String(Math.max(0,Math.floor(startNumber)));const endStr=String(Math.max(0,Math.floor(endNumber)));const maxLen=Math.max(startStr.length,endStr.length);const paddedStart=startStr.padStart(maxLen,"0");const paddedEnd=endStr.padStart(maxLen,"0");const
    currentStr=String(Math.max(0,Math.floor(current))).padStart(maxLen,"0");// Format number with prefix, suffix, and decimals function formatNumber(num){let str=decimals>0?Number(num).toFixed(decimals):String(Math.round(num));return`${props.prefix||""}${str}${props.suffix||""}`;}//
    For each digit, animate vertical slide function renderDigits(){// If formatting is enabled, render as a single string (no slot effect) if(props.prefix||props.suffix||decimals>0){return /*#__PURE__*/_jsx("span",{style:{fontWeight:font?.variant==="Bold"?700:600,...font,color,textAlign:"center",fontVariantNumeric:"tabular-nums",fontFeatureSettings:'"tnum"',userSelect:"none",width:"100%",display:"block"},children:formatNumber(current)});}return
    paddedEnd.split("").map((endDigit,i)=>{const startDigit=paddedStart[i];const currDigit=currentStr[i];// Build digit stack 0-9 const digits=Array.from({length:10},(_,d)=>d);// If start > end, count down const isUp=Number(endDigit)>=Number(startDigit);const
    digitRange=isUp?digits.slice(Number(startDigit),Number(endDigit)+1):digits.slice(Number(endDigit),Number(startDigit)+1).reverse();// For slot effect, always show 0-9, but scroll to currDigit const translateY=-Number(currDigit)*1.1// 1.1em per digit
    for spacing ;return /*#__PURE__*/_jsx("div",{style:{width:"1ch",height:"1.1em",overflow:"hidden",display:"inline-block",verticalAlign:"middle"},children:/*#__PURE__*/_jsx("div",{style:{display:"flex",flexDirection:"column",transition:started&&!isStatic?`transform
    ${duration}s cubic-bezier(0.4,0,0.2,1)`:"none",transform:`translateY(${translateY}em)`},children:digits.map(d=>/*#__PURE__*/_jsx("span",{style:{height:"1.1em",lineHeight:"1.1em",fontWeight:font?.variant==="Bold"?700:600,...font,color,display:"block",textAlign:"center",fontVariantNumeric:"tabular-nums",fontFeatureSettings:'"tnum"',userSelect:"none"},children:d},d))})},i);});}//
    Responsive container return /*#__PURE__*/_jsx("div",{ref:containerRef,style:{...style,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:font?.variant==="Bold"?700:600,fontSize:font?.fontSize||48,letterSpacing:font?.letterSpacing||"-0.03em",lineHeight:font?.lineHeight||"1.1em",color,background:"transparent",fontVariantNumeric:"tabular-nums",fontFeatureSettings:'"tnum"',overflow:"hidden",userSelect:"none"},children:renderDigits()});}addPropertyControls(NumberCounter,{startNumber:{type:ControlType.Number,title:"Start",defaultValue:0,min:0,max:999999,displayStepper:true},endNumber:{type:ControlType.Number,title:"End",defaultValue:250,min:0,max:999999,displayStepper:true},prefix:{type:ControlType.String,title:"Prefix",defaultValue:"",placeholder:"e.g.
    $"},suffix:{type:ControlType.String,title:"Suffix",defaultValue:"",placeholder:"e.g. %"},duration:{type:ControlType.Number,title:"Duration",defaultValue:1.2,min:.2,max:5,step:.1,unit:"s"},trigger:{type:ControlType.Enum,title:"Trigger",options:["layer"],optionTitles:["Layer
    in view"],defaultValue:"layer",displaySegmentedControl:true},color:{type:ControlType.Color,title:"Color",defaultValue:"#000000"},decimals:{type:ControlType.Number,title:"Decimals",defaultValue:0,min:0,max:6,step:1,displayStepper:true},font:{type:ControlType.Font,title:"Font",controls:"extended",defaultFontType:"sans-serif",defaultValue:{fontSize:48,variant:"Bold",letterSpacing:"-0.03em",lineHeight:"1.1em"}}});
    export const __FramerMetadata__ = {"exports":{"default":{"type":"reactComponent","name":"NumberCounter","slots":[],"annotations":{"framerSupportedLayoutWidth":"any-prefer-fixed","framerSupportedLayoutHeight":"any-prefer-fixed","framerContractVersion":"1"}},"__FramerMetadata__":{"type":"variable"}}}
    //# sourceMappingURL=./NumberCounter.map